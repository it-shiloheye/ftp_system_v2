// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.26.0
// source: client_queries.sql

package db_access

import (
	"context"

	"github.com/google/uuid"
	"github.com/jackc/pgx/v5/pgtype"
)

const getFileData = `-- name: GetFileData :one
SELECT (
    peer_id,
    file_state,
    file_data
) FROM file_storage 
WHERE file_hash = $1
`

// GetFileData
//
//	SELECT (
//	    peer_id,
//	    file_state,
//	    file_data
//	) FROM file_storage
//	WHERE file_hash = $1
func (q *Queries) GetFileData(ctx context.Context, fileHash *string) (interface{}, error) {
	row := q.db.QueryRow(ctx, getFileData, fileHash)
	var column_1 interface{}
	err := row.Scan(&column_1)
	return column_1, err
}

const getFiles = `-- name: GetFiles :many
SELECT (
    file_name,
    file_path,
    file_type,
    modification_date,
    file_state,
    file_hash,
    prev_file_hash
) FROM file_storage 
WHERE peer_id = $1
`

// GetFiles
//
//	SELECT (
//	    file_name,
//	    file_path,
//	    file_type,
//	    modification_date,
//	    file_state,
//	    file_hash,
//	    prev_file_hash
//	) FROM file_storage
//	WHERE peer_id = $1
func (q *Queries) GetFiles(ctx context.Context, peerID uuid.UUID) ([]interface{}, error) {
	rows, err := q.db.Query(ctx, getFiles, peerID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []interface{}{}
	for rows.Next() {
		var column_1 interface{}
		if err := rows.Scan(&column_1); err != nil {
			return nil, err
		}
		items = append(items, column_1)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertFile = `-- name: InsertFile :one
INSERT INTO file_storage (
    peer_id,
    file_name,
    file_path,
    file_type,
    modification_date,
    file_state,
    file_data
) VALUES (
    $1,
    $2,
    $3,
    $4,
    $5,
    $6,
    $7
) RETURNING (
    id,
    file_hash
)
`

type InsertFileParams struct {
	PeerID           uuid.UUID          `json:"peer_id"`
	FileName         string             `json:"file_name"`
	FilePath         string             `json:"file_path"`
	FileType         string             `json:"file_type"`
	ModificationDate pgtype.Timestamp   `json:"modification_date"`
	FileState        NullFileStatusType `json:"file_state"`
	FileData         []byte             `json:"file_data"`
}

// InsertFile
//
//	INSERT INTO file_storage (
//	    peer_id,
//	    file_name,
//	    file_path,
//	    file_type,
//	    modification_date,
//	    file_state,
//	    file_data
//	) VALUES (
//	    $1,
//	    $2,
//	    $3,
//	    $4,
//	    $5,
//	    $6,
//	    $7
//	) RETURNING (
//	    id,
//	    file_hash
//	)
func (q *Queries) InsertFile(ctx context.Context, arg *InsertFileParams) (interface{}, error) {
	row := q.db.QueryRow(ctx, insertFile,
		arg.PeerID,
		arg.FileName,
		arg.FilePath,
		arg.FileType,
		arg.ModificationDate,
		arg.FileState,
		arg.FileData,
	)
	var column_1 interface{}
	err := row.Scan(&column_1)
	return column_1, err
}
